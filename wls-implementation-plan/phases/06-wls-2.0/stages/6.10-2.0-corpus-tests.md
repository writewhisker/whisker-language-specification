# Stage 6.10: WLS 2.0 Test Corpus

## Objective
Create comprehensive test corpus for all WLS 2.0 features.

## Files to Create
- `phase-4-validation/test-corpus/wls-2.0/*.yaml`

## Prompt

```
Create WLS 2.0 test corpus:

1. Create test-corpus/wls-2.0/threads.yaml:

- name: thread-spawn-basic
  description: Basic thread spawning
  input: |
    :: Start
    Main content.
    -> Background
    More main content.

    == Background
    Background content.
    -> END
  expected:
    valid: true
    threads: 2

- name: thread-interleave
  description: Thread content interleaving
  input: |
    :: Start
    -> Ambient
    Main.

    == Ambient
    {~|Sound1|Sound2|}
  play:
    - output_contains: ["Main"]

2. Create test-corpus/wls-2.0/state-machines.yaml:

- name: list-add-state
  input: |
    LIST state = (a), b, c
    :: Start
    {do state += b}
    {state ? b}Has B{/}
  expected:
    output_contains: "Has B"

- name: list-remove-state
  input: |
    LIST state = a, (b), c
    :: Start
    {do state -= b}
    {state ? b}Has B{else}No B{/}
  expected:
    output_contains: "No B"

3. Create test-corpus/wls-2.0/timed.yaml:

- name: delay-basic
  input: |
    :: Start
    Before.
    @delay 100ms {
    After delay.
    }
  play:
    - wait: 50
      output_not_contains: "After delay"
    - wait: 100
      output_contains: "After delay"

4. Create test-corpus/wls-2.0/external.yaml:

- name: external-call
  input: |
    EXTERNAL greet(name: string): string
    :: Start
    ${greet("World")}
  externals:
    greet: "(name) => 'Hello, ' + name"
  expected:
    output_contains: "Hello, World"

5. Create test-corpus/wls-2.0/parameterized.yaml:

- name: passage-params-basic
  input: |
    :: Describe(item)
    You see a $item.

    :: Start
    -> Describe("sword") ->
    -> Describe("shield") ->
  expected:
    output_sequence:
      - "You see a sword."
      - "You see a shield."

- name: passage-params-default
  input: |
    :: Greet(name, title = "friend")
    Hello, $title $name!

    :: Start
    -> Greet("Alice") ->
  expected:
    output_contains: "Hello, friend Alice!"

Total: 50+ WLS 2.0 specific tests.
```

## Expected Output
200+ lines of test cases.

## Verification
```bash
cd phase-4-validation
./tools/run-corpus.sh --category=wls-2.0
```

## Phase 6 Complete
WLS 2.0 implementation complete with all features and tests.
