# Stage 4.02: TypeScript Validator Test Coverage

## Objective
Expand validator tests to 95% coverage.

## Files to Create/Modify
- `packages/story-validation/src/validators/*.test.ts`

## Prompt

```
Expand validator test coverage:

1. For each validator, add tests covering:

a) True positives (errors correctly detected):
   - Simple cases
   - Complex cases
   - Edge cases

b) True negatives (valid code passes):
   - Common patterns
   - Edge cases that look like errors

c) Error message accuracy:
   - Correct code reported
   - Correct line numbers
   - Helpful messages

2. Create comprehensive test suites:

describe('MissingStartPassageValidator', () => {
  it('fails when Start is missing', ...);
  it('passes when Start exists', ...);
  it('is case-insensitive for Start', ...);
  it('handles empty story', ...);
});

describe('DeadLinksValidator', () => {
  it('detects link to missing passage', ...);
  it('allows special targets (END, BACK)', ...);
  it('is case-insensitive for targets', ...);
  it('reports correct line number', ...);
});

// Similar for all validators

3. Add false positive tests:
- Ensure valid patterns don't trigger errors
- Test complex but valid structures

4. Target metrics:
- 95% line coverage
- All error codes tested
- All edge cases documented
```

## Expected Output
~250 lines of additional tests.

## Verification
```bash
pnpm --filter @writewhisker/story-validation test -- --coverage
```

## Next Stage
4.03-ts-runtime-coverage.md
