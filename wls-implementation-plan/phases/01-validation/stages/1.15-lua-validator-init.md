# Stage 1.15: Lua - Validator Module Init

## Objective
Create the main validator module for Lua.

## Files to Create
- `lib/whisker/validators/init.lua`

## Prompt

```
Create the main validator module in whisker-core:
/Users/jims/code/github.com/writewhisker/whisker-core/lib/whisker/validators/init.lua

local error_codes = require("whisker.validators.error_codes")

local M = {}

-- Store registered validators
local validators = {}

-- Register a validator
function M.register(validator)
  table.insert(validators, validator)
end

-- Run all validators
function M.validate(story)
  local results = {
    valid = true,
    errors = {},
    warnings = {},
    info = {}
  }

  for _, validator in ipairs(validators) do
    local validator_errors = validator.validate(story)
    for _, err in ipairs(validator_errors) do
      if err.severity == error_codes.SEVERITY.ERROR then
        table.insert(results.errors, err)
        results.valid = false
      elseif err.severity == error_codes.SEVERITY.WARNING then
        table.insert(results.warnings, err)
      else
        table.insert(results.info, err)
      end
    end
  end

  return results
end

-- Run specific validator by name
function M.validate_with(story, validator_names)
  local results = {
    valid = true,
    errors = {},
    warnings = {},
    info = {}
  }

  for _, validator in ipairs(validators) do
    local should_run = false
    for _, name in ipairs(validator_names) do
      if validator.name == name then
        should_run = true
        break
      end
    end

    if should_run then
      local validator_errors = validator.validate(story)
      for _, err in ipairs(validator_errors) do
        if err.severity == error_codes.SEVERITY.ERROR then
          table.insert(results.errors, err)
          results.valid = false
        elseif err.severity == error_codes.SEVERITY.WARNING then
          table.insert(results.warnings, err)
        else
          table.insert(results.info, err)
        end
      end
    end
  end

  return results
end

-- Get list of registered validators
function M.list_validators()
  local names = {}
  for _, v in ipairs(validators) do
    table.insert(names, v.name)
  end
  return names
end

-- Clear all validators (for testing)
function M.clear()
  validators = {}
end

-- Re-export error codes
M.error_codes = error_codes
M.create_error = error_codes.create_error

return M
```

## Expected Output
~90 lines Lua file.

## Verification
```bash
cd ~/code/github.com/writewhisker/whisker-core

# Syntax check
luac -p lib/whisker/validators/init.lua

# Test require works
lua -e "local v = require('whisker.validators'); print(v)"
```

## Next Stage
1.16-lua-structural-validators.md
