# Stage 1.19: Lua - Register All Validators

## Objective
Register all Lua validators in the main module.

## Files to Modify
- `lib/whisker/validators/init.lua`

## Prompt

```
Update lib/whisker/validators/init.lua to register all validators:

local error_codes = require("whisker.validators.error_codes")
local structural = require("whisker.validators.structural")
local links = require("whisker.validators.links")
local flow = require("whisker.validators.flow")

local M = {}

-- Store registered validators
local validators = {}

-- [Keep existing functions: register, validate, validate_with, list_validators, clear]

-- Register default validators
local function register_defaults()
  -- Structure validators (run first)
  M.register(structural.MissingStartPassageValidator)
  M.register(structural.DuplicatePassagesValidator)
  M.register(structural.EmptyPassagesValidator)
  M.register(structural.UnreachablePassagesValidator)

  -- Link validators
  M.register(links.DeadLinksValidator)
  M.register(links.SelfLinkValidator)
  M.register(links.SpecialTargetCaseValidator)

  -- Flow validators
  M.register(flow.DeadEndValidator)
  M.register(flow.CycleDetectorValidator)
end

-- Initialize with defaults
register_defaults()

-- Re-export submodules
M.error_codes = error_codes
M.structural = structural
M.links = links
M.flow = flow

-- Re-export helpers
M.create_error = error_codes.create_error
M.format_message = error_codes.format_message

return M
```

## Expected Output
~30 lines added/modified.

## Verification
```bash
cd ~/code/github.com/writewhisker/whisker-core

# Test all validators load
lua -e "
local validators = require('whisker.validators')
local list = validators.list_validators()
print('Registered validators:', #list)
for _, name in ipairs(list) do print('  -', name) end
"

# Expected output:
# Registered validators: 9
#   - MissingStartPassageValidator
#   - DuplicatePassagesValidator
#   - ...

# Run all validator tests
busted spec/validators/
```

## Next Stage
1.20-corpus-validation-tests-1.md
