# Stage 1.05: Specification - Type, Flow, and Quality Codes

## Objective
Add Type (TYP), Flow (FLW), and Quality (QUA) error codes to complete the specification.

## Files to Modify
- `phase-1-specification/spec/11-VALIDATION.md`

## Prompt

```
Update the validation specification at:
/Users/jims/code/github.com/whisker-language-specification-1.0/phase-1-specification/spec/11-VALIDATION.md

Add three new sections after Expression: Type, Flow, and Quality.

TYPE (TYP) CODES:

WLS-TYP-001: type_mismatch
- Severity: error
- Message: "Type mismatch: expected {expected}, got {actual}"
- Example: Comparing string to number without conversion

WLS-TYP-002: arithmetic_on_string
- Severity: error
- Message: "Cannot perform arithmetic on string value"
- Example: {$name + 1} where $name is string

WLS-TYP-003: comparison_type_mismatch
- Severity: warning
- Message: "Comparing values of different types"
- Example: {$count == "5"}

WLS-TYP-004: invalid_list_operation
- Severity: error
- Message: "Invalid operation on LIST type"
- Example: Arithmetic on LIST variable

WLS-TYP-005: function_argument_type
- Severity: error
- Message: "Function '{name}' argument {n}: expected {expected}"
- Example: Passing string to numeric function

FLOW (FLW) CODES:

WLS-FLW-001: dead_end_passage
- Severity: warning
- Message: "Passage '{name}' has no outgoing links or choices"
- Example: Passage with content but no way forward

WLS-FLW-002: no_terminal_path
- Severity: warning
- Message: "No path leads to END from '{name}'"
- Example: Story branch that loops forever

WLS-FLW-003: cycle_detected
- Severity: info
- Message: "Cycle detected: {path}"
- Example: A -> B -> C -> A

WLS-FLW-004: infinite_loop_risk
- Severity: warning
- Message: "Potential infinite loop at '{name}'"
- Example: Unconditional redirect back

WLS-FLW-005: unreachable_code
- Severity: warning
- Message: "Code after unconditional redirect is unreachable"
- Example: Content after -> END

WLS-FLW-006: always_false_condition
- Severity: warning
- Message: "Condition is always false"
- Example: {$x > 0 and $x < 0}

QUALITY (QUA) CODES:

WLS-QUA-001: low_branching_factor
- Severity: info
- Message: "Story has low branching factor ({value})"
- Threshold: < 1.5 average choices per passage

WLS-QUA-002: high_complexity
- Severity: info
- Message: "Passage '{name}' has high cyclomatic complexity ({value})"
- Threshold: > 10

WLS-QUA-003: long_passage
- Severity: info
- Message: "Passage '{name}' exceeds recommended length ({lines} lines)"
- Threshold: > 50 lines

WLS-QUA-004: deep_nesting
- Severity: info
- Message: "Deep conditional nesting in '{name}' ({depth} levels)"
- Threshold: > 5 levels

WLS-QUA-005: excessive_variables
- Severity: info
- Message: "Story uses {count} variables (threshold: {max})"
- Threshold: > 50

Format each consistently. Update table of contents.
Add a summary table at the end listing all 42 error codes.
```

## Expected Output
~250 additional lines completing the specification.

## Verification
```bash
# Check all code counts
grep -c "WLS-TYP-00" phase-1-specification/spec/11-VALIDATION.md  # 5
grep -c "WLS-FLW-00" phase-1-specification/spec/11-VALIDATION.md  # 6
grep -c "WLS-QUA-00" phase-1-specification/spec/11-VALIDATION.md  # 5

# Total codes
grep -c "^### WLS-" phase-1-specification/spec/11-VALIDATION.md
# Expected: 42
```

## Next Stage
1.06-ts-error-codes-file.md
